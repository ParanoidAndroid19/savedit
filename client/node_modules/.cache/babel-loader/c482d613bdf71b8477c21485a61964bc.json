{"ast":null,"code":"var _jsxFileName = \"/Users/simranbhake/Desktop/ProjectProgress/8. savedit/client/src/pages/Login/index.js\";\nimport React, { useEffect, useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport axios from \"axios\";\nimport { useHistory } from 'react-router-dom';\nimport queryString from \"query-string\";\nimport cred from '../../cred.json';\nexport default function Login(props) {\n  let history = useHistory(); // const [redditAccessToken, setRedditAccessToken] = useState(\"\")\n\n  var apiurl = cred.apiUrl;\n\n  function handleLogin() {\n    localStorage.setItem('user', JSON.stringify({\n      token: 'something'\n    }));\n    history.push(`/home`);\n  }\n\n  if (localStorage.getItem('user')) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        textAlign: 'center',\n        margin: 'auto',\n        marginTop: '35vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 9\n      }\n    }, \"Redirecting to Home\"), history.push(`/home`));\n  }\n\n  const code = queryString.parse(props.location.search).code;\n  const randomString = queryString.parse(props.location.search).state;\n  console.log(code);\n  console.log(randomString); // for getting the access token\n\n  useEffect(() => {\n    if (randomString === \"RANDOM_STRING\" && code) {\n      axios.post(apiurl + \"/reddit/getRedditAccessToken\", {\n        redirecturl,\n        code\n      }, {\n        \"Content-Type\": \"application/json\"\n      }).then(res => {\n        console.log(res);\n      }).catch(error => {\n        console.log(error);\n      });\n    } else {\n      console.log('login failed');\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: 'center',\n      margin: 'auto',\n      marginTop: '35vh'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, \"Logging In!\"));\n}","map":{"version":3,"sources":["/Users/simranbhake/Desktop/ProjectProgress/8. savedit/client/src/pages/Login/index.js"],"names":["React","useEffect","useState","Button","axios","useHistory","queryString","cred","Login","props","history","apiurl","apiUrl","handleLogin","localStorage","setItem","JSON","stringify","token","push","getItem","textAlign","margin","marginTop","code","parse","location","search","randomString","state","console","log","post","redirecturl","then","res","catch","error"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,OAAOC,IAAP,MAAiB,iBAAjB;AAEA,eAAe,SAASC,KAAT,CAAeC,KAAf,EAAsB;AACnC,MAAIC,OAAO,GAAGL,UAAU,EAAxB,CADmC,CAEnC;;AACA,MAAIM,MAAM,GAAGJ,IAAI,CAACK,MAAlB;;AAEA,WAASC,WAAT,GAAsB;AACpBC,IAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAe;AAACC,MAAAA,KAAK,EAAE;AAAR,KAAf,CAA7B;AACAR,IAAAA,OAAO,CAACS,IAAR,CAAc,OAAd;AACD;;AAED,MAAGL,YAAY,CAACM,OAAb,CAAqB,MAArB,CAAH,EAAgC;AAC9B,wBACE;AAAK,MAAA,KAAK,EAAE;AAAEC,QAAAA,SAAS,EAAE,QAAb;AAAuBC,QAAAA,MAAM,EAAE,MAA/B;AAAuCC,QAAAA,SAAS,EAAE;AAAlD,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,EAEGb,OAAO,CAACS,IAAR,CAAc,OAAd,CAFH,CADF;AAMD;;AAED,QAAMK,IAAI,GAAGlB,WAAW,CAACmB,KAAZ,CAAkBhB,KAAK,CAACiB,QAAN,CAAeC,MAAjC,EAAyCH,IAAtD;AACA,QAAMI,YAAY,GAAGtB,WAAW,CAACmB,KAAZ,CAAkBhB,KAAK,CAACiB,QAAN,CAAeC,MAAjC,EAAyCE,KAA9D;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ;AACAM,EAAAA,OAAO,CAACC,GAAR,CAAYH,YAAZ,EAvBmC,CAyBnC;;AACA3B,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAI2B,YAAY,KAAK,eAAjB,IAAoCJ,IAAxC,EAA8C;AAC1CpB,MAAAA,KAAK,CAAC4B,IAAN,CAAWrB,MAAM,GAAG,8BAApB,EAAoD;AAAEsB,QAAAA,WAAF;AAAeT,QAAAA;AAAf,OAApD,EAA2E;AAAE,wBAAgB;AAAlB,OAA3E,EACGU,IADH,CACSC,GAAD,IAAS;AAACL,QAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AAAiB,OADnC,EAEGC,KAFH,CAEUC,KAAD,IAAW;AAAEP,QAAAA,OAAO,CAACC,GAAR,CAAYM,KAAZ;AAAoB,OAF1C;AAGH,KAJD,MAIO;AACHP,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACH;AACJ,GARQ,EAQN,EARM,CAAT;AAWA,sBACE;AAAK,IAAA,KAAK,EAAE;AAAEV,MAAAA,SAAS,EAAE,QAAb;AAAuBC,MAAAA,MAAM,EAAE,MAA/B;AAAuCC,MAAAA,SAAS,EAAE;AAAlD,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,CADF;AAKD","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Button from '@material-ui/core/Button'\nimport axios from \"axios\"\nimport { useHistory } from 'react-router-dom'\nimport queryString from \"query-string\"\nimport cred from '../../cred.json'\n\nexport default function Login(props) {\n  let history = useHistory();\n  // const [redditAccessToken, setRedditAccessToken] = useState(\"\")\n  var apiurl = cred.apiUrl\n\n  function handleLogin(){\n    localStorage.setItem('user', JSON.stringify({token: 'something'}))\n    history.push(`/home`)\n  }\n\n  if(localStorage.getItem('user')){\n    return (\n      <div style={{ textAlign: 'center', margin: 'auto', marginTop: '35vh' }}>\n        <h5>Redirecting to Home</h5>\n        {history.push(`/home`)}\n      </div>\n    )\n  }\n\n  const code = queryString.parse(props.location.search).code\n  const randomString = queryString.parse(props.location.search).state\n\n  console.log(code)\n  console.log(randomString)\n\n  // for getting the access token\n  useEffect(() => {\n      if (randomString === \"RANDOM_STRING\" && code) {\n          axios.post(apiurl + \"/reddit/getRedditAccessToken\", { redirecturl, code }, { \"Content-Type\": \"application/json\" })\n            .then((res) => {console.log(res)})\n            .catch((error) => { console.log(error) })\n      } else {\n          console.log('login failed')\n      }\n  }, [])\n\n\n  return (\n    <div style={{ textAlign: 'center', margin: 'auto', marginTop: '35vh' }} >\n      <p>Logging In!</p>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}