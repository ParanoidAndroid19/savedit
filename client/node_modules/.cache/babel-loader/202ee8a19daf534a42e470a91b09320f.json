{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _lodash = require(\"lodash\");\n\nvar _Promise = _interopRequireDefault(require(\"../Promise.js\"));\n\nvar _util = _interopRequireDefault(require(\"util\"));\n\nvar _url = require(\"url\");\n\nvar _helpers = require(\"../helpers.js\");\n\nvar _errors = require(\"../errors.js\");\n\nvar _More = _interopRequireWildcard(require(\"./More.js\"));\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nvar INTERNAL_DEFAULTS = {\n  _query: {},\n  _transform: function (value) {\n    return value;\n  },\n  _method: 'get',\n  _isCommentList: false,\n  _link_id: null,\n  _uri: null,\n  _more: null,\n  _cachedLookahead: null\n};\n/**\n* A class representing a list of content. This is a subclass of the native Array object, so it has all the properties of\nan Array (length, forEach, etc.) in addition to some added methods. The Listing can be extended by using the\n[#fetchMore()]{@link Listing#fetchMore} and\n[#fetchAll()]{@link Listing#fetchAll} functions. Note that these methods return new Listings, rather than mutating the\noriginal Listing.\n*\n* Most methods that return Listings will also accept `limit`, `after`, `before`, `show`, and `count` properties.\n*\n* If you've used the reddit API before (or used other API wrappers like [PRAW](https://praw.readthedocs.org/en/stable/)), you\nmight know that reddit uses a `MoreComments` object in its raw JSON responses, representing comments that have been stubbed\nout of Listings. In snoowrap, there are no exposed `MoreComments` objects; the objects returned by the reddit API are\nstripped from Listings and are used internally as sources for the `fetchMore` functions. This means that in snoowrap, Listings\nthat contain Comments can be used/expanded in the same manner as Listings that don't contain Comments, and for the most part\nyou don't have to worry about the distinction.\n\n(Incidentally, if you encounter a Listing that *does* contain a `MoreComments` object then it's a bug, so please report it.)\n\n* <style> #Listing {display: none} </style>\n* @extends Array\n*/\n\nvar Listing = class Listing extends Array {\n  constructor() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var _r = arguments.length > 1 ? arguments[1] : undefined;\n\n    super();\n\n    if (!(this instanceof Listing)) {\n      // Safari 9 has an incorrect implementation of classes that extend Arrays. As a workaround,\n      // manually set the constructor and prototype.\n      this.constructor = Listing;\n      Object.setPrototypeOf(this, Listing.prototype);\n    }\n\n    this.push.apply(this, _toConsumableArray(options.children || []));\n    this._r = _r;\n    this._cachedLookahead = options._cachedLookahead;\n    (0, _lodash.defaultsDeep)(this, (0, _lodash.pick)(options, Object.keys(INTERNAL_DEFAULTS)), INTERNAL_DEFAULTS);\n    Object.assign(this._query, (0, _lodash.pick)(options, ['before', 'after']));\n\n    if (options.children && options.children[options.children.length - 1] instanceof _More.default) {\n      this._setMore(this.pop());\n    }\n  }\n\n  _setUri(value) {\n    var parsedUri = (0, _url.parse)(value, true);\n    this._uri = parsedUri.pathname;\n    (0, _lodash.defaultsDeep)(this._query, parsedUri.query);\n\n    if (parsedUri.query.before) {\n      this._query.after = null;\n    } else {\n      this._query.before = null;\n    }\n  }\n  /**\n  * @summary A getter that indicates whether this Listing has any more items to fetch.\n  * @type {boolean}\n  */\n\n\n  get isFinished() {\n    // The process of checking whether a Listing is 'finished' varies depending on what kind of Listing it is.\n    return this._isCommentList\n    /* For comment Listings (i.e. Listings containing comments and comment replies, sourced by `more` objects): A Listing is\n    *never* finished if it has a cached lookahead (i.e. extra items that were fetched from a previous request). If there is\n    no cached lookahead, a Listing is finished iff it has an empty `more` object. */\n    ? (0, _lodash.isEmpty)(this._cachedLookahead) && !!this._more && (0, _lodash.isEmpty)(this._more.children)\n    /* For non-comment Listings: A Listing is always finished if it has no URI (since there would be nowhere to fetch items\n    from). If it has a URI, a Listing is finished iff its `before` and `after` query are both `null`. This is because reddit\n    returns a value of `null` as the `after` and `before` parameters to signify that a Listing is complete.\n     It is important to check for `null` here rather than any falsey value, because when an empty Listing is initialized, its\n    `after` and `before` properties are both `undefined`, but calling these empty Listings `finished` would be incorrect. */\n    : !this._uri || this._query.after === null && this._query.before === null;\n  }\n\n  get is_finished() {\n    // camel-case alias for backwards-compatibility.\n    // As a getter, the `isFinished` property doesn't have an alias like everything else.\n    return this.isFinished;\n  }\n  /**\n  * @summary Fetches some more items\n  * @param {object} options\n  * @param {number} options.amount The number of items to fetch.\n  * @param {boolean} [options.skipReplies=false] For a Listing that contains comment objects on a Submission, this option can\n  be used to save a few API calls, provided that only top-level comments are being examined. If this is set to `true`, snoowrap\n  is able to fetch 100 Comments per API call rather than 20, but all returned Comments will have no fetched replies by default.\n  *\n  * Internal details: When `skipReplies` is set to `true`, snoowrap uses reddit's `api/info` endpoint to fetch Comments. When\n  `skipReplies` is set to `false`, snoowrap uses reddit's `api/morechildren` endpoint. It's worth noting that reddit does\n  not allow concurrent requests to the `api/morechildren` endpoint by the same account.\n  * @param {boolean} [options.append=true] If `true`, the resulting Listing will contain the existing elements in addition to\n  the newly-fetched elements. If `false`, the resulting Listing will only contain the newly-fetched elements.\n  * @returns {Promise} A new Listing containing the newly-fetched elements. If `options.append` is `true`, the new Listing will\n  also contain all elements that were in the original Listing. Under most circumstances, the newly-fetched elements will appear\n  at the end of the new Listing. However, if reverse pagination is enabled (i.e. if this Listing was created with a `before`\n  query parameter), then the newly-fetched elements will appear at the beginning. In any case, continuity is maintained, i.e.\n  the order of items in the Listing will be the same as the order in which they appear on reddit.\n  * @example\n  * r.getHot({limit: 25}).then(myListing => {\n  *   console.log(myListing.length); // => 25\n  *   myListing.fetchMore({amount: 10}).then(extendedListing => {\n  *     console.log(extendedListing.length); // => 35\n  *   })\n  * });\n  */\n\n\n  fetchMore(options) {\n    var parsedOptions = (0, _lodash.defaults)(typeof options === 'number' ? {\n      amount: options\n    } : (0, _lodash.clone)(options), // Accept either `skip_replies` or `skipReplies` for backwards compatibility.\n    {\n      append: true,\n      skipReplies: options.skip_replies\n    });\n\n    if (typeof parsedOptions.amount !== 'number' || Number.isNaN(parsedOptions.amount)) {\n      throw new _errors.InvalidMethodCallError('Failed to fetch Listing. (`amount` parameter was missing or invalid)');\n    }\n\n    if (parsedOptions.amount <= 0 || this.isFinished) {\n      return this._r._promiseWrap(_Promise.default.resolve(parsedOptions.append ? this._clone() : this._clone()._empty()));\n    }\n\n    if (this._cachedLookahead) {\n      var cloned = this._clone();\n\n      cloned.push.apply(cloned, _toConsumableArray(cloned._cachedLookahead.splice(0, parsedOptions.amount)));\n      return cloned.fetchMore(parsedOptions.amount - cloned.length + this.length);\n    }\n\n    return this._r._promiseWrap(this._more ? this._fetchMoreComments(parsedOptions) : this._fetchMoreRegular(parsedOptions));\n  }\n\n  _fetchMoreRegular(options) {\n    var _this = this;\n\n    var query = (0, _lodash.omitBy)((0, _lodash.clone)(this._query), function (value) {\n      return value === null || value === undefined;\n    });\n\n    if (!this._isCommentList) {\n      /* Reddit returns a different number of items per request depending on the `limit` querystring property specified in the\n      request. If no `limit` property is specified, reddit returns some number of items depending on the user's preferences\n      (currently 25 items with default preferences). If a `limit` property is specified, then reddit returns `limit` items per\n      batch. However, this is capped at 100, so if a `limit` larger than 100 items is specified, reddit will only return 100\n      items in the batch. (The cap of 100 could plausibly change to a different amount in the future.)\n       However, one caveat is that reddit's parser doesn't understand the javascript `Infinity` global. If `limit=Infinity` is\n      provided in the querystring, reddit won't understand the parameter so it'll just act as if no parameter was provided, and\n      will return 25 items in the batch. This is suboptimal behavior as far as snoowrap is concerned, because it means that 4\n      times as many requests are needed to fetch the entire listing.\n       To get around the issue, snoowrap caps the `limit` property at Number.MAX_SAFE_INTEGER when sending requests. This ensures\n      that `Infinity` will never be sent as part of the querystring, so reddit will always return the maximal 100 items per\n      request if the desired amount of items is large. */\n      query.limit = Math.min(options.amount, Number.MAX_SAFE_INTEGER);\n    }\n\n    return this._r.oauthRequest({\n      uri: this._uri,\n      qs: query,\n      method: this._method\n    }).then(this._transform).then(function (response) {\n      var cloned = _this._clone();\n\n      if (!options.append) {\n        cloned._empty();\n      }\n\n      if (cloned._query.before) {\n        cloned.unshift.apply(cloned, _toConsumableArray(response));\n        cloned._query.before = response._query.before;\n        cloned._query.after = null;\n      } else {\n        cloned.push.apply(cloned, _toConsumableArray(response));\n        cloned._query.before = null;\n        cloned._query.after = response._query.after;\n      }\n\n      if (_this._isCommentList) {\n        cloned._more = cloned._more || response._more || _More.emptyChildren;\n\n        if (response.length > options.amount) {\n          cloned._cachedLookahead = Array.from(cloned.splice(options.amount));\n        }\n      }\n\n      return cloned.fetchMore(_objectSpread({}, options, {\n        append: true,\n        amount: options.amount - response.length\n      }));\n    });\n  }\n  /* Pagination for comments works differently than it does for most other things; rather than sending a link to the next page\n  within a Listing, reddit sends the last comment in the list as as a `more` object, with links to all the remaining comments\n  in the thread. */\n\n\n  _fetchMoreComments(options) {\n    var _this2 = this;\n\n    return this._more.fetchMore(options).then(function (moreComments) {\n      var cloned = _this2._clone();\n\n      if (!options.append) {\n        cloned._empty();\n      }\n\n      cloned.push.apply(cloned, _toConsumableArray(moreComments));\n      cloned._more.children = cloned._more.children.slice(options.amount);\n      return cloned;\n    });\n  }\n  /**\n  * @summary Fetches all of the items in this Listing, only stopping when there are none left.\n  * @param {object} [options] Fetching options -- see {@link Listing#fetchMore}\n  * @returns {Promise} A new fully-fetched Listing. Keep in mind that this method has the potential to exhaust your\n  ratelimit quickly if the Listing doesn't have a clear end (e.g. with posts on the front page), so use it with discretion.\n  * @example\n  *\n  * r.getMe().getUpvotedContent().fetchAll().then(console.log)\n  * // => Listing [ Submission { ... }, Submission { ... }, ... ]\n  */\n\n\n  fetchAll(options) {\n    return this.fetchMore(_objectSpread({}, options, {\n      amount: Infinity\n    }));\n  }\n\n  fetchUntil(options) {\n    this._r._warn('Listing#fetchUntil is deprecated -- use Listing#fetchMore instead.');\n\n    return this.fetchMore(_objectSpread({}, options, {\n      append: true,\n      amount: options.length - this.length\n    }));\n  }\n\n  _clone() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$deep = _ref.deep,\n        deep = _ref$deep === void 0 ? false : _ref$deep;\n\n    var properties = (0, _lodash.pick)(this, Object.keys(INTERNAL_DEFAULTS));\n    properties._query = (0, _lodash.clone)(properties._query);\n    properties._cachedLookahead = (0, _lodash.clone)(properties._cachedLookahead);\n    properties._more = this._more && this._more._clone();\n    var shallowChildren = Array.from(this);\n    properties.children = deep ? shallowChildren.map(function (item) {\n      return '_clone' in item && typeof item._clone === 'function' ? item._clone({\n        deep\n      }) : item;\n    }) : shallowChildren;\n    return new Listing(properties, this._r);\n  }\n\n  _setMore(moreObj) {\n    this._more = moreObj;\n    this._isCommentList = true;\n  }\n\n  _empty() {\n    this.splice(0, this.length);\n    return this;\n  }\n\n  toJSON() {\n    return Array.from(this).map(function (item) {\n      return item && item.toJSON ? item.toJSON() : item;\n    });\n  }\n\n};\n(0, _helpers.defineInspectFunc)(Listing.prototype, function () {\n  return \"Listing \".concat(_util.default.inspect(Array.from(this)));\n});\nvar _default = Listing;\nexports.default = _default;","map":{"version":3,"sources":["/Users/simranbhake/Desktop/ProjectProgress/8. savedit/client/node_modules/snoowrap/dist/objects/Listing.js"],"names":["Object","defineProperty","exports","value","default","_lodash","require","_Promise","_interopRequireDefault","_util","_url","_helpers","_errors","_More","_interopRequireWildcard","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","desc","getOwnPropertyDescriptor","get","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","Symbol","iterator","toString","Array","from","isArray","arr2","INTERNAL_DEFAULTS","_query","_transform","_method","_isCommentList","_link_id","_uri","_more","_cachedLookahead","Listing","constructor","options","undefined","_r","setPrototypeOf","children","defaultsDeep","pick","assign","_setMore","pop","_setUri","parsedUri","parse","pathname","query","before","after","isFinished","isEmpty","is_finished","fetchMore","parsedOptions","defaults","amount","clone","append","skipReplies","skip_replies","Number","isNaN","InvalidMethodCallError","_promiseWrap","resolve","_clone","_empty","cloned","splice","_fetchMoreComments","_fetchMoreRegular","_this","omitBy","limit","Math","min","MAX_SAFE_INTEGER","oauthRequest","uri","qs","method","then","response","unshift","emptyChildren","_this2","moreComments","slice","fetchAll","Infinity","fetchUntil","_warn","_ref","_ref$deep","deep","properties","shallowChildren","map","item","moreObj","toJSON","defineInspectFunc","concat","inspect","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _lodash = require(\"lodash\");\n\nvar _Promise = _interopRequireDefault(require(\"../Promise.js\"));\n\nvar _util = _interopRequireDefault(require(\"util\"));\n\nvar _url = require(\"url\");\n\nvar _helpers = require(\"../helpers.js\");\n\nvar _errors = require(\"../errors.js\");\n\nvar _More = _interopRequireWildcard(require(\"./More.js\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nvar INTERNAL_DEFAULTS = {\n  _query: {},\n  _transform: function (value) {\n    return value;\n  },\n  _method: 'get',\n  _isCommentList: false,\n  _link_id: null,\n  _uri: null,\n  _more: null,\n  _cachedLookahead: null\n};\n/**\n* A class representing a list of content. This is a subclass of the native Array object, so it has all the properties of\nan Array (length, forEach, etc.) in addition to some added methods. The Listing can be extended by using the\n[#fetchMore()]{@link Listing#fetchMore} and\n[#fetchAll()]{@link Listing#fetchAll} functions. Note that these methods return new Listings, rather than mutating the\noriginal Listing.\n*\n* Most methods that return Listings will also accept `limit`, `after`, `before`, `show`, and `count` properties.\n*\n* If you've used the reddit API before (or used other API wrappers like [PRAW](https://praw.readthedocs.org/en/stable/)), you\nmight know that reddit uses a `MoreComments` object in its raw JSON responses, representing comments that have been stubbed\nout of Listings. In snoowrap, there are no exposed `MoreComments` objects; the objects returned by the reddit API are\nstripped from Listings and are used internally as sources for the `fetchMore` functions. This means that in snoowrap, Listings\nthat contain Comments can be used/expanded in the same manner as Listings that don't contain Comments, and for the most part\nyou don't have to worry about the distinction.\n\n(Incidentally, if you encounter a Listing that *does* contain a `MoreComments` object then it's a bug, so please report it.)\n\n* <style> #Listing {display: none} </style>\n* @extends Array\n*/\n\nvar Listing = class Listing extends Array {\n  constructor() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var _r = arguments.length > 1 ? arguments[1] : undefined;\n\n    super();\n\n    if (!(this instanceof Listing)) {\n      // Safari 9 has an incorrect implementation of classes that extend Arrays. As a workaround,\n      // manually set the constructor and prototype.\n      this.constructor = Listing;\n      Object.setPrototypeOf(this, Listing.prototype);\n    }\n\n    this.push.apply(this, _toConsumableArray(options.children || []));\n    this._r = _r;\n    this._cachedLookahead = options._cachedLookahead;\n    (0, _lodash.defaultsDeep)(this, (0, _lodash.pick)(options, Object.keys(INTERNAL_DEFAULTS)), INTERNAL_DEFAULTS);\n    Object.assign(this._query, (0, _lodash.pick)(options, ['before', 'after']));\n\n    if (options.children && options.children[options.children.length - 1] instanceof _More.default) {\n      this._setMore(this.pop());\n    }\n  }\n\n  _setUri(value) {\n    var parsedUri = (0, _url.parse)(value, true);\n    this._uri = parsedUri.pathname;\n    (0, _lodash.defaultsDeep)(this._query, parsedUri.query);\n\n    if (parsedUri.query.before) {\n      this._query.after = null;\n    } else {\n      this._query.before = null;\n    }\n  }\n  /**\n  * @summary A getter that indicates whether this Listing has any more items to fetch.\n  * @type {boolean}\n  */\n\n\n  get isFinished() {\n    // The process of checking whether a Listing is 'finished' varies depending on what kind of Listing it is.\n    return this._isCommentList\n    /* For comment Listings (i.e. Listings containing comments and comment replies, sourced by `more` objects): A Listing is\n    *never* finished if it has a cached lookahead (i.e. extra items that were fetched from a previous request). If there is\n    no cached lookahead, a Listing is finished iff it has an empty `more` object. */\n    ? (0, _lodash.isEmpty)(this._cachedLookahead) && !!this._more && (0, _lodash.isEmpty)(this._more.children)\n    /* For non-comment Listings: A Listing is always finished if it has no URI (since there would be nowhere to fetch items\n    from). If it has a URI, a Listing is finished iff its `before` and `after` query are both `null`. This is because reddit\n    returns a value of `null` as the `after` and `before` parameters to signify that a Listing is complete.\n     It is important to check for `null` here rather than any falsey value, because when an empty Listing is initialized, its\n    `after` and `before` properties are both `undefined`, but calling these empty Listings `finished` would be incorrect. */\n    : !this._uri || this._query.after === null && this._query.before === null;\n  }\n\n  get is_finished() {\n    // camel-case alias for backwards-compatibility.\n    // As a getter, the `isFinished` property doesn't have an alias like everything else.\n    return this.isFinished;\n  }\n  /**\n  * @summary Fetches some more items\n  * @param {object} options\n  * @param {number} options.amount The number of items to fetch.\n  * @param {boolean} [options.skipReplies=false] For a Listing that contains comment objects on a Submission, this option can\n  be used to save a few API calls, provided that only top-level comments are being examined. If this is set to `true`, snoowrap\n  is able to fetch 100 Comments per API call rather than 20, but all returned Comments will have no fetched replies by default.\n  *\n  * Internal details: When `skipReplies` is set to `true`, snoowrap uses reddit's `api/info` endpoint to fetch Comments. When\n  `skipReplies` is set to `false`, snoowrap uses reddit's `api/morechildren` endpoint. It's worth noting that reddit does\n  not allow concurrent requests to the `api/morechildren` endpoint by the same account.\n  * @param {boolean} [options.append=true] If `true`, the resulting Listing will contain the existing elements in addition to\n  the newly-fetched elements. If `false`, the resulting Listing will only contain the newly-fetched elements.\n  * @returns {Promise} A new Listing containing the newly-fetched elements. If `options.append` is `true`, the new Listing will\n  also contain all elements that were in the original Listing. Under most circumstances, the newly-fetched elements will appear\n  at the end of the new Listing. However, if reverse pagination is enabled (i.e. if this Listing was created with a `before`\n  query parameter), then the newly-fetched elements will appear at the beginning. In any case, continuity is maintained, i.e.\n  the order of items in the Listing will be the same as the order in which they appear on reddit.\n  * @example\n  * r.getHot({limit: 25}).then(myListing => {\n  *   console.log(myListing.length); // => 25\n  *   myListing.fetchMore({amount: 10}).then(extendedListing => {\n  *     console.log(extendedListing.length); // => 35\n  *   })\n  * });\n  */\n\n\n  fetchMore(options) {\n    var parsedOptions = (0, _lodash.defaults)(typeof options === 'number' ? {\n      amount: options\n    } : (0, _lodash.clone)(options), // Accept either `skip_replies` or `skipReplies` for backwards compatibility.\n    {\n      append: true,\n      skipReplies: options.skip_replies\n    });\n\n    if (typeof parsedOptions.amount !== 'number' || Number.isNaN(parsedOptions.amount)) {\n      throw new _errors.InvalidMethodCallError('Failed to fetch Listing. (`amount` parameter was missing or invalid)');\n    }\n\n    if (parsedOptions.amount <= 0 || this.isFinished) {\n      return this._r._promiseWrap(_Promise.default.resolve(parsedOptions.append ? this._clone() : this._clone()._empty()));\n    }\n\n    if (this._cachedLookahead) {\n      var cloned = this._clone();\n\n      cloned.push.apply(cloned, _toConsumableArray(cloned._cachedLookahead.splice(0, parsedOptions.amount)));\n      return cloned.fetchMore(parsedOptions.amount - cloned.length + this.length);\n    }\n\n    return this._r._promiseWrap(this._more ? this._fetchMoreComments(parsedOptions) : this._fetchMoreRegular(parsedOptions));\n  }\n\n  _fetchMoreRegular(options) {\n    var _this = this;\n\n    var query = (0, _lodash.omitBy)((0, _lodash.clone)(this._query), function (value) {\n      return value === null || value === undefined;\n    });\n\n    if (!this._isCommentList) {\n      /* Reddit returns a different number of items per request depending on the `limit` querystring property specified in the\n      request. If no `limit` property is specified, reddit returns some number of items depending on the user's preferences\n      (currently 25 items with default preferences). If a `limit` property is specified, then reddit returns `limit` items per\n      batch. However, this is capped at 100, so if a `limit` larger than 100 items is specified, reddit will only return 100\n      items in the batch. (The cap of 100 could plausibly change to a different amount in the future.)\n       However, one caveat is that reddit's parser doesn't understand the javascript `Infinity` global. If `limit=Infinity` is\n      provided in the querystring, reddit won't understand the parameter so it'll just act as if no parameter was provided, and\n      will return 25 items in the batch. This is suboptimal behavior as far as snoowrap is concerned, because it means that 4\n      times as many requests are needed to fetch the entire listing.\n       To get around the issue, snoowrap caps the `limit` property at Number.MAX_SAFE_INTEGER when sending requests. This ensures\n      that `Infinity` will never be sent as part of the querystring, so reddit will always return the maximal 100 items per\n      request if the desired amount of items is large. */\n      query.limit = Math.min(options.amount, Number.MAX_SAFE_INTEGER);\n    }\n\n    return this._r.oauthRequest({\n      uri: this._uri,\n      qs: query,\n      method: this._method\n    }).then(this._transform).then(function (response) {\n      var cloned = _this._clone();\n\n      if (!options.append) {\n        cloned._empty();\n      }\n\n      if (cloned._query.before) {\n        cloned.unshift.apply(cloned, _toConsumableArray(response));\n        cloned._query.before = response._query.before;\n        cloned._query.after = null;\n      } else {\n        cloned.push.apply(cloned, _toConsumableArray(response));\n        cloned._query.before = null;\n        cloned._query.after = response._query.after;\n      }\n\n      if (_this._isCommentList) {\n        cloned._more = cloned._more || response._more || _More.emptyChildren;\n\n        if (response.length > options.amount) {\n          cloned._cachedLookahead = Array.from(cloned.splice(options.amount));\n        }\n      }\n\n      return cloned.fetchMore(_objectSpread({}, options, {\n        append: true,\n        amount: options.amount - response.length\n      }));\n    });\n  }\n  /* Pagination for comments works differently than it does for most other things; rather than sending a link to the next page\n  within a Listing, reddit sends the last comment in the list as as a `more` object, with links to all the remaining comments\n  in the thread. */\n\n\n  _fetchMoreComments(options) {\n    var _this2 = this;\n\n    return this._more.fetchMore(options).then(function (moreComments) {\n      var cloned = _this2._clone();\n\n      if (!options.append) {\n        cloned._empty();\n      }\n\n      cloned.push.apply(cloned, _toConsumableArray(moreComments));\n      cloned._more.children = cloned._more.children.slice(options.amount);\n      return cloned;\n    });\n  }\n  /**\n  * @summary Fetches all of the items in this Listing, only stopping when there are none left.\n  * @param {object} [options] Fetching options -- see {@link Listing#fetchMore}\n  * @returns {Promise} A new fully-fetched Listing. Keep in mind that this method has the potential to exhaust your\n  ratelimit quickly if the Listing doesn't have a clear end (e.g. with posts on the front page), so use it with discretion.\n  * @example\n  *\n  * r.getMe().getUpvotedContent().fetchAll().then(console.log)\n  * // => Listing [ Submission { ... }, Submission { ... }, ... ]\n  */\n\n\n  fetchAll(options) {\n    return this.fetchMore(_objectSpread({}, options, {\n      amount: Infinity\n    }));\n  }\n\n  fetchUntil(options) {\n    this._r._warn('Listing#fetchUntil is deprecated -- use Listing#fetchMore instead.');\n\n    return this.fetchMore(_objectSpread({}, options, {\n      append: true,\n      amount: options.length - this.length\n    }));\n  }\n\n  _clone() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$deep = _ref.deep,\n        deep = _ref$deep === void 0 ? false : _ref$deep;\n\n    var properties = (0, _lodash.pick)(this, Object.keys(INTERNAL_DEFAULTS));\n    properties._query = (0, _lodash.clone)(properties._query);\n    properties._cachedLookahead = (0, _lodash.clone)(properties._cachedLookahead);\n    properties._more = this._more && this._more._clone();\n    var shallowChildren = Array.from(this);\n    properties.children = deep ? shallowChildren.map(function (item) {\n      return '_clone' in item && typeof item._clone === 'function' ? item._clone({\n        deep\n      }) : item;\n    }) : shallowChildren;\n    return new Listing(properties, this._r);\n  }\n\n  _setMore(moreObj) {\n    this._more = moreObj;\n    this._isCommentList = true;\n  }\n\n  _empty() {\n    this.splice(0, this.length);\n    return this;\n  }\n\n  toJSON() {\n    return Array.from(this).map(function (item) {\n      return item && item.toJSON ? item.toJSON() : item;\n    });\n  }\n\n};\n(0, _helpers.defineInspectFunc)(Listing.prototype, function () {\n  return \"Listing \".concat(_util.default.inspect(Array.from(this)));\n});\nvar _default = Listing;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}