{"ast":null,"code":"\"use strict\";\n\nvar _Promise = _interopRequireDefault(require(\"./Promise.js\"));\n\nvar _url = _interopRequireDefault(require(\"url\"));\n\nvar _querystring = require(\"querystring\");\n\nvar _errors = require(\"./errors.js\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/* eslint-env browser */\n// Provide a shim for some of the functionality of the `request-promise` npm package in browsers.\n// Previously, snoowrap depended on browserify to package `request-promise` for the browser bundle, and while this worked\n// properly, it caused the snoowrap bundle to be very large since `request-promise` contains many dependencies that snoowrap\n// doesn't actually need.\n\n\nfunction noop() {}\n\nfunction tryParseJson(maybeJson) {\n  try {\n    return JSON.parse(maybeJson);\n  } catch (e) {\n    return maybeJson;\n  }\n}\n\nfunction parseHeaders(headerString) {\n  return headerString.split('\\r\\n').filter(function (line) {\n    return line;\n  }).reduce(function (accumulator, line) {\n    var index = line.indexOf(': ');\n    accumulator[line.slice(0, index)] = line.slice(index + 2);\n    return accumulator;\n  }, {});\n}\n\nmodule.exports = function rawRequest(options) {\n  // It would be nice to be able to use the `URL` API in browsers, but Safari 9 doesn't support `URLSearchParams`.\n  var parsedUrl = _url.default.parse(options.url || _url.default.resolve(options.baseUrl, options.uri), true);\n\n  parsedUrl.search = (0, _querystring.stringify)(Object.assign({}, parsedUrl.query, options.qs)); // create a new url object with the new qs params, to ensure that the `href` value changes (to use later for parsing response)\n\n  var finalUrl = _url.default.parse(parsedUrl.format());\n\n  var xhr = new XMLHttpRequest();\n  var method = options.method ? options.method.toUpperCase() : 'GET';\n  xhr.open(method, finalUrl.href);\n  Object.keys(options.headers).filter(function (header) {\n    return header.toLowerCase() !== 'user-agent';\n  }).forEach(function (key) {\n    return xhr.setRequestHeader(key, options.headers[key]);\n  });\n\n  if (options.auth) {\n    xhr.setRequestHeader('Authorization', options.auth.bearer ? \"bearer \".concat(options.auth.bearer) : 'basic ' + btoa(\"\".concat(options.auth.user, \":\").concat(options.auth.pass)));\n  }\n\n  var requestBody;\n\n  if (options.formData) {\n    requestBody = new FormData();\n    Object.keys(options.formData).forEach(function (key) {\n      return requestBody.append(key, options.formData[key]);\n    });\n\n    if (options.form) {\n      Object.keys(options.form).forEach(function (key) {\n        return requestBody.append(key, options.form[key]);\n      });\n    }\n\n    xhr.setRequestHeader('Content-Type', 'multipart/form-data');\n  } else if (options.form) {\n    requestBody = (0, _querystring.stringify)(options.form);\n    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n  } else if (options.json) {\n    requestBody = JSON.stringify(options.body);\n    xhr.setRequestHeader('Content-Type', 'application/json');\n  } else {\n    requestBody = options.body;\n  }\n\n  return new _Promise.default(function (resolve, reject, onCancel) {\n    onCancel(function () {\n      return xhr.abort();\n    });\n\n    xhr.onload = function () {\n      var _this = this;\n\n      var success = this.status >= 200 && this.status < 300;\n      var settleFunc = success ? resolve : function (err) {\n        return reject(Object.assign(new _errors.StatusCodeError(_this.status + ''), err));\n      };\n      var response = {\n        statusCode: this.status,\n        body: (options.json ? tryParseJson : noop)(xhr.response),\n        headers: parseHeaders(xhr.getAllResponseHeaders()),\n        request: {\n          method,\n          uri: finalUrl\n        }\n      };\n\n      if (typeof options.transform === 'function') {\n        settleFunc(options.transform(response.body, response));\n      } else if (!success || options.resolveWithFullResponse) {\n        settleFunc(response);\n      } else {\n        settleFunc(response.body);\n      }\n    };\n\n    xhr.onerror = function (err) {\n      return reject(Object.assign(new _errors.RequestError(), err));\n    };\n\n    xhr.send(requestBody);\n  }).timeout(options.timeout || Math.pow(2, 31) - 1, 'Error: ETIMEDOUT').catch(_Promise.default.TimeoutError, function (err) {\n    xhr.abort();\n    throw err;\n  });\n};","map":{"version":3,"sources":["/Users/simranbhake/Desktop/ProjectProgress/8. savedit/client/node_modules/snoowrap/dist/xhr.js"],"names":["_Promise","_interopRequireDefault","require","_url","_querystring","_errors","obj","__esModule","default","noop","tryParseJson","maybeJson","JSON","parse","e","parseHeaders","headerString","split","filter","line","reduce","accumulator","index","indexOf","slice","module","exports","rawRequest","options","parsedUrl","url","resolve","baseUrl","uri","search","stringify","Object","assign","query","qs","finalUrl","format","xhr","XMLHttpRequest","method","toUpperCase","open","href","keys","headers","header","toLowerCase","forEach","key","setRequestHeader","auth","bearer","concat","btoa","user","pass","requestBody","formData","FormData","append","form","json","body","reject","onCancel","abort","onload","_this","success","status","settleFunc","err","StatusCodeError","response","statusCode","getAllResponseHeaders","request","transform","resolveWithFullResponse","onerror","RequestError","send","timeout","Math","pow","catch","TimeoutError"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _Promise = _interopRequireDefault(require(\"./Promise.js\"));\n\nvar _url = _interopRequireDefault(require(\"url\"));\n\nvar _querystring = require(\"querystring\");\n\nvar _errors = require(\"./errors.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-env browser */\n// Provide a shim for some of the functionality of the `request-promise` npm package in browsers.\n// Previously, snoowrap depended on browserify to package `request-promise` for the browser bundle, and while this worked\n// properly, it caused the snoowrap bundle to be very large since `request-promise` contains many dependencies that snoowrap\n// doesn't actually need.\nfunction noop() {}\n\nfunction tryParseJson(maybeJson) {\n  try {\n    return JSON.parse(maybeJson);\n  } catch (e) {\n    return maybeJson;\n  }\n}\n\nfunction parseHeaders(headerString) {\n  return headerString.split('\\r\\n').filter(function (line) {\n    return line;\n  }).reduce(function (accumulator, line) {\n    var index = line.indexOf(': ');\n    accumulator[line.slice(0, index)] = line.slice(index + 2);\n    return accumulator;\n  }, {});\n}\n\nmodule.exports = function rawRequest(options) {\n  // It would be nice to be able to use the `URL` API in browsers, but Safari 9 doesn't support `URLSearchParams`.\n  var parsedUrl = _url.default.parse(options.url || _url.default.resolve(options.baseUrl, options.uri), true);\n\n  parsedUrl.search = (0, _querystring.stringify)(Object.assign({}, parsedUrl.query, options.qs)); // create a new url object with the new qs params, to ensure that the `href` value changes (to use later for parsing response)\n\n  var finalUrl = _url.default.parse(parsedUrl.format());\n\n  var xhr = new XMLHttpRequest();\n  var method = options.method ? options.method.toUpperCase() : 'GET';\n  xhr.open(method, finalUrl.href);\n  Object.keys(options.headers).filter(function (header) {\n    return header.toLowerCase() !== 'user-agent';\n  }).forEach(function (key) {\n    return xhr.setRequestHeader(key, options.headers[key]);\n  });\n\n  if (options.auth) {\n    xhr.setRequestHeader('Authorization', options.auth.bearer ? \"bearer \".concat(options.auth.bearer) : 'basic ' + btoa(\"\".concat(options.auth.user, \":\").concat(options.auth.pass)));\n  }\n\n  var requestBody;\n\n  if (options.formData) {\n    requestBody = new FormData();\n    Object.keys(options.formData).forEach(function (key) {\n      return requestBody.append(key, options.formData[key]);\n    });\n\n    if (options.form) {\n      Object.keys(options.form).forEach(function (key) {\n        return requestBody.append(key, options.form[key]);\n      });\n    }\n\n    xhr.setRequestHeader('Content-Type', 'multipart/form-data');\n  } else if (options.form) {\n    requestBody = (0, _querystring.stringify)(options.form);\n    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n  } else if (options.json) {\n    requestBody = JSON.stringify(options.body);\n    xhr.setRequestHeader('Content-Type', 'application/json');\n  } else {\n    requestBody = options.body;\n  }\n\n  return new _Promise.default(function (resolve, reject, onCancel) {\n    onCancel(function () {\n      return xhr.abort();\n    });\n\n    xhr.onload = function () {\n      var _this = this;\n\n      var success = this.status >= 200 && this.status < 300;\n      var settleFunc = success ? resolve : function (err) {\n        return reject(Object.assign(new _errors.StatusCodeError(_this.status + ''), err));\n      };\n      var response = {\n        statusCode: this.status,\n        body: (options.json ? tryParseJson : noop)(xhr.response),\n        headers: parseHeaders(xhr.getAllResponseHeaders()),\n        request: {\n          method,\n          uri: finalUrl\n        }\n      };\n\n      if (typeof options.transform === 'function') {\n        settleFunc(options.transform(response.body, response));\n      } else if (!success || options.resolveWithFullResponse) {\n        settleFunc(response);\n      } else {\n        settleFunc(response.body);\n      }\n    };\n\n    xhr.onerror = function (err) {\n      return reject(Object.assign(new _errors.RequestError(), err));\n    };\n\n    xhr.send(requestBody);\n  }).timeout(options.timeout || Math.pow(2, 31) - 1, 'Error: ETIMEDOUT').catch(_Promise.default.TimeoutError, function (err) {\n    xhr.abort();\n    throw err;\n  });\n};"]},"metadata":{},"sourceType":"script"}