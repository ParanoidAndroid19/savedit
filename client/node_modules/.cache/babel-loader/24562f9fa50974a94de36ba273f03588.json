{"ast":null,"code":"var _jsxFileName = \"/Users/simranbhake/Desktop/ProjectProgress/8. savedit/client/src/pages/Login/index.js\";\nimport React, { useEffect, useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport axios from \"axios\";\nimport { useHistory } from 'react-router-dom';\nimport queryString from \"query-string\";\nimport cred from '../../cred.json';\nexport default function Login(props) {\n  let history = useHistory(); // const [redditAccessToken, setRedditAccessToken] = useState(\"\")\n\n  var apiurl = cred.apiUrl;\n  var redirecturl = cred.redirectUrl;\n  const code = queryString.parse(props.location.search).code;\n  const randomString = queryString.parse(props.location.search).state;\n  console.log(code);\n  console.log(randomString);\n  console.log(redirecturl); // for getting the access token\n\n  useEffect(() => {\n    if (randomString === \"RANDOM_STRING\" && code) {\n      axios.post(apiurl + \"/reddit/getRedditAccessToken\", {\n        redirecturl,\n        code\n      }).then(res => {\n        console.log(res);\n      }).catch(error => {\n        console.log(error);\n      });\n    } else {\n      console.log('login failed');\n    }\n  }, []);\n\n  function handleLogin() {\n    localStorage.setItem('user', JSON.stringify({\n      token: 'something'\n    }));\n    history.push(`/home`);\n  }\n\n  if (localStorage.getItem('user')) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        textAlign: 'center',\n        margin: 'auto',\n        marginTop: '35vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }\n    }, \"Redirecting to Home\"), history.push(`/home`));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: 'center',\n      margin: 'auto',\n      marginTop: '35vh'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, \"Logging In!\"));\n}","map":{"version":3,"sources":["/Users/simranbhake/Desktop/ProjectProgress/8. savedit/client/src/pages/Login/index.js"],"names":["React","useEffect","useState","Button","axios","useHistory","queryString","cred","Login","props","history","apiurl","apiUrl","redirecturl","redirectUrl","code","parse","location","search","randomString","state","console","log","post","then","res","catch","error","handleLogin","localStorage","setItem","JSON","stringify","token","push","getItem","textAlign","margin","marginTop"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,OAAOC,IAAP,MAAiB,iBAAjB;AAEA,eAAe,SAASC,KAAT,CAAeC,KAAf,EAAsB;AACnC,MAAIC,OAAO,GAAGL,UAAU,EAAxB,CADmC,CAEnC;;AACA,MAAIM,MAAM,GAAGJ,IAAI,CAACK,MAAlB;AACA,MAAIC,WAAW,GAAGN,IAAI,CAACO,WAAvB;AAEA,QAAMC,IAAI,GAAGT,WAAW,CAACU,KAAZ,CAAkBP,KAAK,CAACQ,QAAN,CAAeC,MAAjC,EAAyCH,IAAtD;AACA,QAAMI,YAAY,GAAGb,WAAW,CAACU,KAAZ,CAAkBP,KAAK,CAACQ,QAAN,CAAeC,MAAjC,EAAyCE,KAA9D;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ;AACAM,EAAAA,OAAO,CAACC,GAAR,CAAYH,YAAZ;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAYT,WAAZ,EAXmC,CAanC;;AACAZ,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIkB,YAAY,KAAK,eAAjB,IAAoCJ,IAAxC,EAA8C;AAC1CX,MAAAA,KAAK,CAACmB,IAAN,CAAWZ,MAAM,GAAG,8BAApB,EAAoD;AAAEE,QAAAA,WAAF;AAAeE,QAAAA;AAAf,OAApD,EACGS,IADH,CACSC,GAAD,IAAS;AAACJ,QAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AAAiB,OADnC,EAEGC,KAFH,CAEUC,KAAD,IAAW;AAAEN,QAAAA,OAAO,CAACC,GAAR,CAAYK,KAAZ;AAAoB,OAF1C;AAGH,KAJD,MAIO;AACHN,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACH;AACJ,GARQ,EAQN,EARM,CAAT;;AAWA,WAASM,WAAT,GAAsB;AACpBC,IAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAe;AAACC,MAAAA,KAAK,EAAE;AAAR,KAAf,CAA7B;AACAvB,IAAAA,OAAO,CAACwB,IAAR,CAAc,OAAd;AACD;;AAED,MAAGL,YAAY,CAACM,OAAb,CAAqB,MAArB,CAAH,EAAgC;AAC9B,wBACE;AAAK,MAAA,KAAK,EAAE;AAAEC,QAAAA,SAAS,EAAE,QAAb;AAAuBC,QAAAA,MAAM,EAAE,MAA/B;AAAuCC,QAAAA,SAAS,EAAE;AAAlD,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,EAEG5B,OAAO,CAACwB,IAAR,CAAc,OAAd,CAFH,CADF;AAMD;;AAED,sBACE;AAAK,IAAA,KAAK,EAAE;AAAEE,MAAAA,SAAS,EAAE,QAAb;AAAuBC,MAAAA,MAAM,EAAE,MAA/B;AAAuCC,MAAAA,SAAS,EAAE;AAAlD,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,CADF;AAKD","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Button from '@material-ui/core/Button'\nimport axios from \"axios\"\nimport { useHistory } from 'react-router-dom'\nimport queryString from \"query-string\"\nimport cred from '../../cred.json'\n\nexport default function Login(props) {\n  let history = useHistory();\n  // const [redditAccessToken, setRedditAccessToken] = useState(\"\")\n  var apiurl = cred.apiUrl\n  var redirecturl = cred.redirectUrl\n\n  const code = queryString.parse(props.location.search).code\n  const randomString = queryString.parse(props.location.search).state\n\n  console.log(code)\n  console.log(randomString)\n  console.log(redirecturl)\n\n  // for getting the access token\n  useEffect(() => {\n      if (randomString === \"RANDOM_STRING\" && code) {\n          axios.post(apiurl + \"/reddit/getRedditAccessToken\", { redirecturl, code })\n            .then((res) => {console.log(res)})\n            .catch((error) => { console.log(error) })\n      } else {\n          console.log('login failed')\n      }\n  }, [])\n\n\n  function handleLogin(){\n    localStorage.setItem('user', JSON.stringify({token: 'something'}))\n    history.push(`/home`)\n  }\n\n  if(localStorage.getItem('user')){\n    return (\n      <div style={{ textAlign: 'center', margin: 'auto', marginTop: '35vh' }}>\n        <h5>Redirecting to Home</h5>\n        {history.push(`/home`)}\n      </div>\n    )\n  }\n\n  return (\n    <div style={{ textAlign: 'center', margin: 'auto', marginTop: '35vh' }} >\n      <p>Logging In!</p>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}